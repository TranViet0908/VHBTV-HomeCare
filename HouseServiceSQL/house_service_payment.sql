-- MySQL dump 10.13  Distrib 8.0.42, for Win64 (x86_64)
--
-- Host: localhost    Database: house_service
-- ------------------------------------------------------
-- Server version	8.0.42

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `payment`
--

DROP TABLE IF EXISTS `payment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `payment` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `user_id` bigint NOT NULL,
  `pay_target_type` enum('PRODUCT_ORDER','SERVICE_ORDER') COLLATE utf8mb4_unicode_ci NOT NULL,
  `pay_target_id` bigint NOT NULL,
  `provider` enum('COD','MOMO','STRIPE','VNPAY') COLLATE utf8mb4_unicode_ci NOT NULL,
  `amount` decimal(12,2) NOT NULL,
  `currency` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT 'VND',
  `status` enum('FAILED','PAID','PENDING','REFUNDED') COLLATE utf8mb4_unicode_ci NOT NULL,
  `transaction_ref` varchar(120) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `paid_at` datetime DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx_payment_user` (`user_id`),
  CONSTRAINT `fk_payment_user` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE RESTRICT,
  CONSTRAINT `payment_chk_amount` CHECK ((`amount` >= 0))
) ENGINE=InnoDB AUTO_INCREMENT=9834 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `payment`
--

LOCK TABLES `payment` WRITE;
/*!40000 ALTER TABLE `payment` DISABLE KEYS */;
INSERT INTO `payment` VALUES (1,1,'PRODUCT_ORDER',1,'COD',230000.00,'VND','PAID','TXN-P-0001','2025-09-20 11:00:00','2025-09-20 05:24:29','2025-09-20 05:24:29'),(2,3,'PRODUCT_ORDER',3,'MOMO',405000.00,'VND','PAID','TXN-P-0003','2025-09-20 11:05:00','2025-09-20 05:24:29','2025-09-20 05:24:29'),(3,4,'PRODUCT_ORDER',4,'VNPAY',600000.00,'VND','PAID','TXN-P-0004','2025-09-20 11:06:00','2025-09-20 05:24:29','2025-09-20 05:24:29'),(4,5,'PRODUCT_ORDER',5,'STRIPE',1161000.00,'VND','PENDING','TXN-P-0005',NULL,'2025-09-20 05:24:29','2025-09-20 05:24:29'),(5,8,'PRODUCT_ORDER',8,'COD',2100000.00,'VND','PAID','TXN-P-0008','2025-09-20 11:10:00','2025-09-20 05:24:29','2025-09-20 05:24:29'),(6,1,'SERVICE_ORDER',1,'MOMO',540000.00,'VND','PAID','TXN-S-0001','2025-09-20 12:00:00','2025-09-20 05:24:29','2025-09-20 05:24:29'),(7,3,'SERVICE_ORDER',3,'VNPAY',360000.00,'VND','PAID','TXN-S-0003','2025-09-20 12:05:00','2025-09-20 05:24:29','2025-09-20 05:24:29'),(8,5,'SERVICE_ORDER',5,'COD',1700000.00,'VND','PENDING','TXN-S-0005',NULL,'2025-09-20 05:24:29','2025-09-20 05:24:29'),(9,9,'SERVICE_ORDER',9,'STRIPE',4500000.00,'VND','PAID','TXN-S-0009','2025-09-20 12:10:00','2025-09-20 05:24:29','2025-09-20 05:24:29'),(10,10,'SERVICE_ORDER',10,'MOMO',2975000.00,'VND','PAID','TXN-S-0010','2025-09-20 12:15:00','2025-09-20 05:24:29','2025-09-20 05:24:29'),(11,19,'SERVICE_ORDER',11,'VNPAY',585000.00,'VND','PAID','VNPAY-20250921-0001','2025-09-21 08:20:00','2025-09-22 15:49:15','2025-09-22 15:49:15'),(12,20,'SERVICE_ORDER',12,'COD',250000.00,'VND','PAID','COD-20250920-0002','2025-09-20 16:30:00','2025-09-22 15:49:15','2025-09-22 15:49:15'),(9801,9101,'SERVICE_ORDER',9601,'MOMO',500000.00,'VND','PAID','SEED-SO-9601-MOMO','2025-09-22 09:00:00','2025-09-22 02:00:00','2025-09-22 02:00:00'),(9802,9102,'SERVICE_ORDER',9602,'COD',350000.00,'VND','PAID','SEED-SO-9602-COD','2025-09-23 10:30:00','2025-09-23 03:30:00','2025-09-23 03:30:00'),(9803,9103,'SERVICE_ORDER',9603,'VNPAY',700000.00,'VND','PENDING','SEED-SO-9603-VNPAY',NULL,'2025-09-24 07:15:00','2025-09-24 07:15:00'),(9804,9101,'SERVICE_ORDER',9604,'MOMO',600000.00,'VND','FAILED','SEED-SO-9604-MOMO',NULL,'2025-09-24 09:00:00','2025-09-24 09:00:00'),(9805,9102,'SERVICE_ORDER',9605,'STRIPE',750000.00,'VND','PAID','SEED-SO-9605-STRIPE','2025-09-25 11:45:00','2025-09-25 04:45:00','2025-09-25 04:45:00'),(9806,9101,'SERVICE_ORDER',9606,'VNPAY',900000.00,'VND','PAID','SEED-SO-9606-VNPAY','2025-09-26 09:20:00','2025-09-26 02:20:00','2025-09-26 02:20:00'),(9807,9102,'SERVICE_ORDER',9607,'COD',650000.00,'VND','PENDING','SEED-SO-9607-COD',NULL,'2025-09-27 01:05:00','2025-09-27 01:05:00'),(9808,9103,'SERVICE_ORDER',9608,'MOMO',350000.00,'VND','PAID','SEED-SO-9608-MOMO','2025-09-27 13:10:00','2025-09-27 06:10:00','2025-09-27 06:10:00'),(9809,9101,'SERVICE_ORDER',9609,'COD',700000.00,'VND','PAID','SEED-SO-9609-COD','2025-09-28 10:00:00','2025-09-28 03:00:00','2025-09-28 03:00:00'),(9810,9102,'SERVICE_ORDER',9610,'VNPAY',800000.00,'VND','PAID','SEED-SO-9610-VNPAY','2025-09-20 12:00:00','2025-09-20 05:00:00','2025-09-20 05:00:00'),(9811,9102,'SERVICE_ORDER',9611,'STRIPE',360000.00,'VND','PENDING','SEED-SO-9611-STRIPE',NULL,'2025-09-18 08:00:00','2025-09-18 08:00:00'),(9812,9103,'SERVICE_ORDER',9612,'COD',600000.00,'VND','PENDING','SEED-SO-9612-COD',NULL,'2025-09-05 02:30:00','2025-09-05 02:30:00'),(9813,14,'SERVICE_ORDER',9760,'VNPAY',500000.00,'VND','PENDING','20251013184729373747',NULL,'2025-10-13 11:47:29','2025-10-13 11:47:29'),(9814,14,'SERVICE_ORDER',9762,'VNPAY',910000.00,'VND','PENDING','20251013185619665413',NULL,'2025-10-13 11:56:19','2025-10-13 11:56:19'),(9815,14,'SERVICE_ORDER',9763,'VNPAY',1500000.00,'VND','PENDING','2025101319533299516',NULL,'2025-10-13 12:53:32','2025-10-13 12:53:32'),(9816,14,'SERVICE_ORDER',9765,'VNPAY',600000.00,'VND','PENDING','20251013201054857557',NULL,'2025-10-13 13:10:54','2025-10-13 13:10:54'),(9817,14,'SERVICE_ORDER',9768,'VNPAY',600000.00,'VND','PENDING','20251013201142159383',NULL,'2025-10-13 13:11:42','2025-10-13 13:11:42'),(9818,14,'SERVICE_ORDER',9771,'VNPAY',600000.00,'VND','PENDING','20251013204039265480',NULL,'2025-10-13 13:40:39','2025-10-13 13:40:39'),(9819,14,'SERVICE_ORDER',9774,'VNPAY',600000.00,'VND','PENDING','2025101320512891355',NULL,'2025-10-13 13:51:28','2025-10-13 13:51:28'),(9820,14,'SERVICE_ORDER',9777,'VNPAY',600000.00,'VND','FAILED','20251013205218581311',NULL,'2025-10-13 13:52:18','2025-10-13 13:53:01'),(9821,14,'SERVICE_ORDER',9780,'VNPAY',2175000.00,'VND','FAILED','20251013210050161684',NULL,'2025-10-13 14:00:50','2025-10-13 14:01:25'),(9822,14,'SERVICE_ORDER',9783,'VNPAY',2225000.00,'VND','PAID','20251013210925475707','2025-10-13 21:09:58','2025-10-13 14:09:25','2025-10-13 14:09:58'),(9823,14,'SERVICE_ORDER',9786,'VNPAY',2225000.00,'VND','PAID','20251013212325603350','2025-10-13 21:23:58','2025-10-13 14:23:25','2025-10-13 14:23:58'),(9824,14,'SERVICE_ORDER',9789,'VNPAY',2175000.00,'VND','PAID','2025101321321688935','2025-10-13 21:32:41','2025-10-13 14:32:16','2025-10-13 14:32:41'),(9825,14,'SERVICE_ORDER',9792,'VNPAY',1106000.00,'VND','PAID','20251014091925965126','2025-10-14 09:20:12','2025-10-14 02:19:25','2025-10-14 02:20:11'),(9826,14,'SERVICE_ORDER',9796,'VNPAY',900000.00,'VND','PAID','20251014150435947919','2025-10-14 15:05:11','2025-10-14 08:04:35','2025-10-14 08:05:11'),(9827,14,'SERVICE_ORDER',9798,'VNPAY',2000000.00,'VND','PAID','20251017002854771289','2025-10-17 00:29:41','2025-10-16 17:28:54','2025-10-16 17:29:40'),(9828,14,'SERVICE_ORDER',9799,'VNPAY',0.00,'VND','PENDING','20251017181554293610',NULL,'2025-10-17 11:15:54','2025-10-17 11:15:54'),(9829,14,'SERVICE_ORDER',9800,'VNPAY',65000.00,'VND','PAID','20251017181607557020','2025-10-17 18:16:41','2025-10-17 11:16:07','2025-10-17 11:16:40'),(9830,14,'SERVICE_ORDER',9801,'VNPAY',65000.00,'VND','PAID','2025101720375820104','2025-10-17 20:39:08','2025-10-17 13:37:58','2025-10-17 13:39:08'),(9831,14,'SERVICE_ORDER',9802,'VNPAY',50000.00,'VND','PAID','20251018174837180554','2025-10-18 17:49:16','2025-10-18 10:48:37','2025-10-18 10:49:15'),(9832,9104,'SERVICE_ORDER',9803,'VNPAY',450000.00,'VND','PENDING','20251018175315611871',NULL,'2025-10-18 10:53:15','2025-10-18 10:53:15'),(9833,9104,'SERVICE_ORDER',9804,'VNPAY',450000.00,'VND','PAID','20251018175327841670','2025-10-18 17:53:46','2025-10-18 10:53:27','2025-10-18 10:53:46');
/*!40000 ALTER TABLE `payment` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2025-10-19 22:42:09
