-- MySQL dump 10.13  Distrib 8.0.42, for Win64 (x86_64)
--
-- Host: localhost    Database: house_service
-- ------------------------------------------------------
-- Server version	8.0.42

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `service_order`
--

DROP TABLE IF EXISTS `service_order`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `service_order` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `order_code` varchar(40) COLLATE utf8mb4_unicode_ci NOT NULL,
  `customer_id` bigint NOT NULL,
  `vendor_id` bigint NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `subtotal` decimal(12,2) NOT NULL,
  `discount_amount` decimal(12,2) NOT NULL DEFAULT '0.00',
  `total` decimal(12,2) NOT NULL,
  `coupon_id` bigint DEFAULT NULL,
  `contact_name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `contact_phone` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `address_line` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `notes` tinytext COLLATE utf8mb4_unicode_ci,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_so_code` (`order_code`),
  KEY `idx_so_customer` (`customer_id`),
  KEY `idx_so_vendor` (`vendor_id`),
  KEY `fk_so_coupon` (`coupon_id`),
  CONSTRAINT `fk_so_coupon` FOREIGN KEY (`coupon_id`) REFERENCES `coupon` (`id`) ON DELETE SET NULL,
  CONSTRAINT `fk_so_customer` FOREIGN KEY (`customer_id`) REFERENCES `user` (`id`) ON DELETE RESTRICT,
  CONSTRAINT `fk_so_vendor` FOREIGN KEY (`vendor_id`) REFERENCES `vendor_profile` (`user_id`) ON DELETE RESTRICT,
  CONSTRAINT `so_chk_money` CHECK (((`subtotal` >= 0) and (`discount_amount` >= 0) and (`total` >= 0)))
) ENGINE=InnoDB AUTO_INCREMENT=9613 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `service_order`
--

LOCK TABLES `service_order` WRITE;
/*!40000 ALTER TABLE `service_order` DISABLE KEYS */;
INSERT INTO `service_order` VALUES (1,'SO0001',1,1,'CONFIRMED',600000.00,60000.00,540000.00,6,'Nguyễn Văn A','0900000001','12 Lê Lợi','Dọn sáng','2025-09-20 05:24:29','2025-09-20 05:24:29'),(2,'SO0002',2,2,'PENDING',350000.00,0.00,350000.00,NULL,'Trần Thị B','0900000002','34 Hai Bà Trưng','','2025-09-20 05:24:29','2025-09-20 05:24:29'),(3,'SO0003',3,3,'COMPLETED',400000.00,40000.00,360000.00,6,'Lê Văn C','0900000003','56 Nguyễn Trãi','','2025-09-20 05:24:29','2025-09-20 05:24:29'),(4,'SO0004',4,4,'PENDING',1500000.00,0.00,1500000.00,NULL,'Phạm Thị D','0900000004','78 Trần Hưng Đạo','','2025-09-20 05:24:29','2025-09-20 05:24:29'),(5,'SO0005',5,5,'PENDING',1800000.00,100000.00,1700000.00,7,'Hoàng Văn E','0900000005','90 Giảng Võ','','2025-09-20 05:24:29','2025-09-20 05:24:29'),(6,'SO0006',6,6,'CONFIRMED',500000.00,25000.00,475000.00,8,'Đinh Thị F','0900000006','11 Cầu Giấy','','2025-09-20 05:24:29','2025-09-20 05:24:29'),(7,'SO0007',7,7,'PENDING',250000.00,0.00,250000.00,NULL,'Bùi Văn G','0900000007','22 Tây Sơn','','2025-09-20 05:24:29','2025-09-20 05:24:29'),(8,'SO0008',8,8,'PENDING',900000.00,0.00,900000.00,NULL,'Đỗ Thị H','0900000008','33 Kim Mã','','2025-09-20 05:24:29','2025-09-20 05:24:29'),(9,'SO0009',9,9,'PENDING',5000000.00,500000.00,4500000.00,6,'Vũ Văn I','0900000009','44 Xã Đàn','','2025-09-20 05:24:29','2025-09-20 05:24:29'),(10,'SO0010',10,10,'PENDING',3500000.00,525000.00,2975000.00,10,'Phan Thị K','0900000010','55 Phạm Hùng','','2025-09-20 05:24:29','2025-09-20 05:24:29'),(11,'SO-V15-0001',19,15,'CANCELLED',650000.00,65000.00,585000.00,11,'Nguyễn Văn A','0900000001','12 Lê Lợi, Hà Nội','Dọn trước 9h','2025-09-21 01:15:00','2025-09-22 15:49:15'),(12,'SO-V15-0002',20,15,'COMPLETED',250000.00,0.00,250000.00,NULL,'Trần Thị B','0900000002','34 Hai Bà Trưng, Hà Nội','Ống nước rò nhỏ','2025-09-20 03:05:00','2025-09-22 15:49:15'),(13,'SO-V15-0003',19,15,'PENDING',400000.00,50000.00,350000.00,12,'Nguyễn Văn A','0900000001','12 Lê Lợi, Hà Nội','Thi công chiều','2025-09-22 04:20:00','2025-09-22 15:49:15'),(9601,'SEED-SO-9601',9101,9001,'COMPLETED',500000.00,0.00,500000.00,NULL,'Khách seed','0901234567','Hà Nội','','2025-09-22 02:00:00','2025-09-22 02:00:00'),(9602,'SEED-SO-9602',9102,9002,'COMPLETED',350000.00,0.00,350000.00,NULL,'Khách seed','0901234567','Hà Nội','','2025-09-23 03:30:00','2025-09-23 03:30:00'),(9603,'SEED-SO-9603',9103,9003,'CONFIRMED',700000.00,0.00,700000.00,NULL,'Khách seed','0901234567','Hà Nội','','2025-09-24 07:15:00','2025-09-24 07:15:00'),(9604,'SEED-SO-9604',9101,9001,'CANCELLED',600000.00,0.00,600000.00,NULL,'Khách seed','0901234567','Hà Nội','','2025-09-24 09:00:00','2025-09-24 09:00:00'),(9605,'SEED-SO-9605',9102,9004,'COMPLETED',800000.00,50000.00,750000.00,NULL,'Khách seed','0901234567','Hà Nội','','2025-09-25 04:45:00','2025-09-25 04:45:00'),(9606,'SEED-SO-9606',9101,9002,'COMPLETED',900000.00,0.00,900000.00,NULL,'Khách seed','0901234567','Hà Nội','','2025-09-26 02:20:00','2025-09-26 02:20:00'),(9607,'SEED-SO-9607',9102,9005,'IN_PROGRESS',650000.00,0.00,650000.00,NULL,'Khách seed','0901234567','Hà Nội','','2025-09-27 01:05:00','2025-09-27 01:05:00'),(9608,'SEED-SO-9608',9103,9002,'COMPLETED',350000.00,0.00,350000.00,NULL,'Khách seed','0901234567','Hà Nội','','2025-09-27 06:10:00','2025-09-27 06:10:00'),(9609,'SEED-SO-9609',9101,9004,'COMPLETED',800000.00,100000.00,700000.00,NULL,'Khách seed','0901234567','Hà Nội','','2025-09-28 03:00:00','2025-09-28 03:00:00'),(9610,'SEED-SO-9610',9102,9004,'COMPLETED',800000.00,0.00,800000.00,NULL,'Khách seed','0901234567','Hà Nội','','2025-09-20 05:00:00','2025-09-20 05:00:00'),(9611,'SEED-SO-9611',9102,9005,'PENDING',360000.00,0.00,360000.00,NULL,'Khách seed','0901234567','Hà Nội','','2025-09-18 08:00:00','2025-09-18 08:00:00'),(9612,'SEED-SO-9612',9103,9001,'CONFIRMED',600000.00,0.00,600000.00,NULL,'Khách seed','0901234567','Hà Nội','','2025-09-05 02:30:00','2025-09-05 02:30:00');
/*!40000 ALTER TABLE `service_order` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2025-09-28 11:53:50
