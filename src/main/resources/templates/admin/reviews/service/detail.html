<!-- templates/admin/reviews/service/detail.html -->
<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Chi tiết Đánh giá Dịch vụ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
<div class="flex">
    <div th:replace="/admin/fragments/sidebar :: sidebar"></div>
    <div class="flex-1 min-h-screen ml-64">
        <div th:replace="/admin/fragments/header :: header"></div>
        <main class="p-6" th:with="r=${review}">
            <div class="mb-6 flex items-center justify-between">
                <h1 class="text-2xl font-semibold">Chi tiết đánh giá Dịch vụ #<span th:text="${r.id}">1</span></h1>
                <a th:href="@{/admin/reviews/service}" class="text-sm text-blue-600 hover:underline">Quay lại danh sách</a>
            </div>

            <div class="bg-white border rounded-lg p-6 grid md:grid-cols-2 gap-6">
                <div>
                    <div class="text-gray-500 text-sm">Dịch vụ</div>
                    <div class="font-medium" th:text="${@utils.vendorServiceName(r.vendorServiceId)}">Service</div>
                </div>
                <div>
                    <div class="text-gray-500 text-sm">Vendor</div>
                    <div class="font-medium" th:text="${@utils.vendorNameByService(r.vendorServiceId)}">Vendor</div>
                </div>
                <div>
                    <div class="text-gray-500 text-sm">Khách hàng</div>
                    <div class="font-medium" th:text="${@utils.userName(r.customerId)}">Customer</div>
                </div>
                <div>
                    <div class="text-gray-500 text-sm">Ngày tạo</div>
                    <div class="font-medium" th:text="${#temporals.format(r.createdAt,'dd/MM/yyyy HH:mm')}">01/09/2025</div>
                </div>
                <div class="md:col-span-2">
                    <div class="text-gray-500 text-sm mb-1">Rating</div>
                    <div>
                        <span th:each="i : ${#numbers.sequence(1, r.rating)}" class="text-amber-400"><i class="fa-solid fa-star"></i></span>
                    </div>
                </div>
                <div class="md:col-span-2">
                    <div class="text-gray-500 text-sm mb-1">Nội dung</div>
                    <div class="whitespace-pre-line" th:text="${r.content}"></div>
                </div>

                <div class="md:col-span-2 flex items-center gap-3 pt-2">
                    <span th:if="${r.hidden}" class="text-xs px-2 py-1 rounded bg-yellow-100 text-yellow-700">Đang ẩn</span>
                    <form th:if="${!r.hidden}" th:action="@{|/admin/reviews/service/${r.id}/hide|}" method="post" class="flex items-center gap-2">
                        <input name="reason" class="border rounded px-3 py-2" placeholder="Lý do ẩn (tuỳ chọn)">
                        <button class="px-4 py-2 bg-amber-600 text-white rounded hover:bg-amber-700"><i class="fa fa-eye-slash mr-1"></i>Ẩn</button>
                    </form>
                    <form th:if="${r.hidden}" th:action="@{|/admin/reviews/service/${r.id}/unhide|}" method="post">
                        <button class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"><i class="fa fa-eye mr-1"></i>Hiện</button>
                    </form>
                    <form th:action="@{|/admin/reviews/service/${r.id}/delete|}" method="post" onsubmit="return confirm('Xóa bình luận này?');">
                        <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"><i class="fa fa-trash mr-1"></i>Xóa</button>
                    </form>
                </div>
            </div>
        </main>
        <div th:replace="/admin/fragments/footer :: footer"></div>
    </div>
</div>
</body>
</html>
