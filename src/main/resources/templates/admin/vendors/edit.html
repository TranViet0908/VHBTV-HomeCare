<!-- src/main/resources/templates/admin/vendors/edit.html -->
<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Sửa Hồ sơ Vendor - VHBTV Homecare</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50">
<div class="flex">
    <div th:replace="/admin/fragments/sidebar :: sidebar"></div>

    <div class="flex-1 min-h-screen ml-64">
        <div th:replace="/admin/fragments/header :: header"></div>

        <main class="p-6" th:object="${profile}">
            <div class="mb-6 flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">Sửa hồ sơ Vendor</h1>
                    <p class="text-gray-600">ID: <span th:text="*{id}">1</span> · Username:
                        <span class="font-medium" th:text="*{user != null ? user.username : 'N/A'}">vendor01</span>
                    </p>
                </div>
                <div class="flex items-center gap-3">
                    <a th:href="@{|/admin/vendors/${profile.id}|}" class="px-4 py-2 bg-gray-100 rounded-lg">Xem</a>
                    <a th:href="@{/admin/vendors}" class="px-4 py-2 bg-white border rounded-lg">Danh sách</a>
                </div>
            </div>

            <form th:action="@{|/admin/vendors/${profile.id}/update|}" method="post"
                  class="bg-white rounded-xl border p-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

                <div>
                    <label class="block text-sm text-gray-600 mb-1">Tên hiển thị</label>
                    <input type="text" name="displayName" th:value="*{displayName}"
                           class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    <p class="text-xs text-red-600" th:if="${#fields.hasErrors('displayName')}" th:errors="*{displayName}"></p>
                </div>

                <div>
                    <label class="block text-sm text-gray-600 mb-1">Tên pháp lý</label>
                    <input type="text" name="legalName" th:value="*{legalName}"
                           class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    <p class="text-xs text-red-600" th:if="${#fields.hasErrors('legalName')}" th:errors="*{legalName}"></p>
                </div>

                <div>
                    <label class="block text-sm text-gray-600 mb-1">Kinh nghiệm (năm)</label>
                    <input type="number" min="0" name="yearsExperience" th:value="*{yearsExperience}"
                           class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    <p class="text-xs text-red-600" th:if="${#fields.hasErrors('yearsExperience')}" th:errors="*{yearsExperience}"></p>
                </div>

                <div>
                    <label class="block text-sm text-gray-600 mb-1">Địa chỉ</label>
                    <input type="text" name="addressLine" th:value="*{addressLine}"
                           class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    <p class="text-xs text-red-600" th:if="${#fields.hasErrors('addressLine')}" th:errors="*{addressLine}"></p>
                </div>

                <div class="md:col-span-2">
                    <label class="block text-sm text-gray-600 mb-1">Giới thiệu</label>
                    <textarea name="bio" rows="4" th:text="*{bio}"
                              class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"></textarea>
                    <p class="text-xs text-red-600" th:if="${#fields.hasErrors('bio')}" th:errors="*{bio}"></p>
                </div>

                <div>
                    <label class="block text-sm text-gray-600 mb-1">Đánh giá</label>
                    <div class="inline-flex items-center gap-2">
                        <span th:text="*{ratingAvg}">0.00</span>
                        <i class="fas fa-star text-amber-400"></i>
                        <span class="text-gray-500 text-sm" th:text="'(' + *{ratingCount} + ')'">(0)</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Điểm và lượt đánh giá chỉ đọc.</p>
                </div>

                <div>
                    <label class="block text-sm text-gray-600 mb-1">Trạng thái xác minh</label>
                    <div>
                        <span th:if="*{verified}" class="inline-block px-2 py-0.5 rounded-full text-xs bg-green-100 text-green-700">Đã xác minh</span>
                        <span th:if="${!profile.verified}" class="inline-block px-2 py-0.5 rounded-full text-xs bg-gray-200 text-gray-700">Chưa</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Đổi qua nút “Xác minh” ở danh sách/chi tiết.</p>
                </div>

                <div class="md:col-span-2 flex items-center justify-end gap-3 pt-2">
                    <a th:href="@{|/admin/vendors/${profile.id}|}" class="px-4 py-2 bg-gray-100 rounded-lg">Hủy</a>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg">Lưu</button>
                </div>
            </form>
        </main>

        <div th:replace="/admin/fragments/footer :: footer"></div>
    </div>
</div>
    <script src="/js/validate/core.js"></script>
    <script src="/js/validate/admin-vendors-form.js"></script>
</body>
</html>
