<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dịch vụ yêu thích - VHBTV HomeCare</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50">
Header
<div th:replace="~{layouts/header :: header}"></div>

Breadcrumb
<section class="bg-white border-b">
  <div class="container mx-auto px-4 py-4">
    <nav class="flex items-center space-x-2 text-sm">
      <a href="/" class="text-gray-500 hover:text-blue-600 transition-colors">
        <i class="fas fa-home"></i>
      </a>
      <span class="text-gray-400">/</span>
      <a href="/customer/profile" class="text-gray-500 hover:text-blue-600 transition-colors">Hồ sơ</a>
      <span class="text-gray-400">/</span>
      <span class="text-gray-900 font-medium">Dịch vụ yêu thích</span>
    </nav>
  </div>
</section>

Page Header
<section class="bg-gradient-to-br from-blue-50 via-white to-purple-50 py-12">
  <div class="container mx-auto px-4">
    <div class="max-w-6xl mx-auto">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-4xl font-bold text-gray-900 mb-2">
            <i class="fas fa-heart text-red-500 mr-3"></i>Dịch vụ yêu thích
          </h1>
          <p class="text-gray-600">
            <span th:text="${wishlistServices.size()}">0</span> dịch vụ đã lưu
          </p>
        </div>
        <div class="flex space-x-3">
          <a href="/customer/wishlist/vendor" class="px-6 py-3 bg-white border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition">
            <i class="fas fa-store mr-2"></i>Nhà cung cấp
          </a>
          <a href="/services" class="px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-medium hover:shadow-lg transition">
            <i class="fas fa-plus mr-2"></i>Thêm dịch vụ
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

Wishlist Grid
<section class="py-12">
  <div class="container mx-auto px-4">
    <div class="max-w-6xl mx-auto">

      Services Grid
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="wishlistGrid">
        <div th:each="wishlist : ${wishlistServices}"
             class="wishlist-card bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden group">

          Cover Image
          <div class="relative h-48 overflow-hidden bg-gradient-to-br from-blue-100 to-purple-100">
            <img th:src="${wishlist.vendorService.coverUrl != null ? wishlist.vendorService.coverUrl : '/placeholder.svg?height=200&width=400'}"
                 th:alt="${wishlist.vendorService.title}"
                 class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">

            Remove Button
            <button th:onclick="'removeFromWishlist(' + ${wishlist.id} + ')'"
                    class="absolute top-3 right-3 w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-all hover:scale-110">
              <i class="fas fa-heart text-red-500"></i>
            </button>

            Vendor Badge
            <div class="absolute bottom-3 left-3">
              <div class="flex items-center space-x-2 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full">
                <div class="w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white text-xs font-bold"
                     th:text="${#strings.substring(wishlist.vendorService.vendor.displayName, 0, 1)}">
                  V
                </div>
                <span class="text-sm font-medium text-gray-700" th:text="${wishlist.vendorService.vendor.displayName}">Vendor Name</span>
              </div>
            </div>
          </div>

          Card Content
          <div class="p-5">
            Service Title
            <h3 class="text-lg font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors"
                th:text="${wishlist.vendorService.title}">
              Gói vệ sinh căn hộ 60m²
            </h3>

            Description
            <p class="text-sm text-gray-600 mb-4 line-clamp-2" th:text="${wishlist.vendorService.description}">
              Dọn tổng vệ sinh căn hộ tiêu chuẩn
            </p>

            Rating & Info
            <div class="flex items-center justify-between text-xs text-gray-500 mb-4 pb-4 border-b">
              <div class="flex items-center space-x-1">
                <i class="fas fa-star text-yellow-400"></i>
                <span class="font-bold text-gray-900" th:text="${wishlist.vendorService.vendor.ratingAvg}">4.8</span>
              </div>
              <div class="flex items-center space-x-1">
                <i class="far fa-clock"></i>
                <span th:text="${wishlist.vendorService.durationMinutes / 60} + 'h'">2h</span>
              </div>
              <div class="flex items-center space-x-1">
                <i class="far fa-calendar"></i>
                <span th:text="${wishlist.vendorService.minNoticeHours} + 'h trước'">24h trước</span>
              </div>
            </div>

            Price & Actions
            <div class="flex items-center justify-between">
              <div>
                <div class="text-2xl font-bold text-blue-600" th:text="${#numbers.formatDecimal(wishlist.vendorService.basePrice, 0, 'COMMA', 0, 'POINT')} + 'đ'">
                  350.000đ
                </div>
                <div class="text-xs text-gray-500" th:text="'/' + ${wishlist.vendorService.unit}">/ công việc</div>
              </div>
              <div class="flex space-x-2">
                <a th:href="@{/services/vendors/{id}(id=${wishlist.vendorService.id})}"
                   class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition">
                  Xem
                </a>
                <button th:onclick="'addToCart(' + ${wishlist.vendorService.id} + ')'"
                        class="px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-medium hover:shadow-lg transition">
                  <i class="fas fa-cart-plus"></i>
                </button>
              </div>
            </div>

            Added Date
            <div class="mt-3 pt-3 border-t text-xs text-gray-500">
              <i class="far fa-clock mr-1"></i>
              Đã lưu <span th:text="${#temporals.format(wishlist.createdAt, 'dd/MM/yyyy')}">01/01/2024</span>
            </div>
          </div>
        </div>
      </div>

      Empty State
      <div th:if="${#lists.isEmpty(wishlistServices)}" class="text-center py-20">
        <i class="fas fa-heart-broken text-8xl text-gray-300 mb-6"></i>
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Chưa có dịch vụ yêu thích</h2>
        <p class="text-gray-600 mb-8">Khám phá và lưu các dịch vụ bạn quan tâm</p>
        <a href="/services" class="inline-block px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-medium hover:shadow-lg transition">
          <i class="fas fa-search mr-2"></i>Khám phá dịch vụ
        </a>
      </div>

    </div>
  </div>
</section>

Footer
<div th:replace="~{layouts/footer :: footer}"></div>

<script>
  // Remove from wishlist
  function removeFromWishlist(wishlistId) {
      if (confirm('Bạn có chắc muốn xóa dịch vụ này khỏi danh sách yêu thích?')) {
          fetch(`/api/customer/wishlist/${wishlistId}`, {
              method: 'DELETE',
              headers: {
                  'Content-Type': 'application/json'
              }
          })
          .then(response => {
              if (response.ok) {
                  // Animate removal
                  const card = event.target.closest('.wishlist-card');
                  anime({
                      targets: card,
                      opacity: [1, 0],
                      scale: [1, 0.8],
                      duration: 400,
                      easing: 'easeInQuad',
                      complete: () => {
                          card.remove();
                          // Check if empty
                          if (document.querySelectorAll('.wishlist-card').length === 0) {
                              location.reload();
                          }
                      }
                  });
              } else {
                  alert('Có lỗi xảy ra. Vui lòng thử lại.');
              }
          })
          .catch(error => {
              console.error('Error:', error);
              alert('Có lỗi xảy ra. Vui lòng thử lại.');
          });
      }
  }

  // Add to cart
  function addToCart(vendorServiceId) {
      fetch('/api/customer/cart/add', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify({
              vendorServiceId: vendorServiceId,
              quantity: 1
          })
      })
      .then(response => {
          if (response.ok) {
              // Show success message
              const btn = event.target.closest('button');
              const originalHTML = btn.innerHTML;
              btn.innerHTML = '<i class="fas fa-check"></i>';
              btn.classList.add('bg-green-500');

              setTimeout(() => {
                  btn.innerHTML = originalHTML;
                  btn.classList.remove('bg-green-500');
              }, 2000);
          } else {
              alert('Có lỗi xảy ra. Vui lòng thử lại.');
          }
      })
      .catch(error => {
          console.error('Error:', error);
          alert('Có lỗi xảy ra. Vui lòng thử lại.');
      });
  }

  // Animate on load
  document.addEventListener('DOMContentLoaded', function() {
      anime({
          targets: '.wishlist-card',
          translateY: [50, 0],
          opacity: [0, 1],
          delay: anime.stagger(100),
          duration: 800,
          easing: 'easeOutExpo'
      });
  });
</script>
</body>
</html>
