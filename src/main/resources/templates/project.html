<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dự án | 5PLUS ONLINE</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *{font-family:'Inter',sans-serif}
    .gradient-text{background:linear-gradient(135deg,#667eea 0%,#f093fb 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .card{background:linear-gradient(145deg,#ffffff 0%,#f8fafc 100%);border-radius:1rem;box-shadow:0 10px 25px rgba(0,0,0,.08)}
  </style>
</head>
<body class="bg-gray-50">
<!-- Navigation -->
<nav class="bg-white shadow-lg fixed w-full top-0 z-50 transition-all duration-300" id="navbar">
  <div class="container mx-auto px-4 lg:px-8">
    <div class="flex justify-between items-center py-4">
      <div class="flex items-center">
        <div class="text-2xl font-bold gradient-text">
          <i class="fas fa-plus-circle mr-2"></i>
          <a href="/">5PLUS ONLINE</a>
        </div>
      </div>
      <div class="hidden md:flex space-x-8 items-center">
        <a href="#home" class="text-gray-700 hover:text-blue-600 transition duration-300 font-medium">Trang chủ</a>
        <a href="#about" class="text-gray-700 hover:text-blue-600 transition duration-300 font-medium">Giới thiệu</a>
        <a href="#services" class="text-gray-700 hover:text-blue-600 transition duration-300 font-medium">Dịch vụ</a>
        <a href="#portfolio" class="text-gray-700 hover:text-blue-600 transition duration-300 font-medium">Portfolio</a>
        <a href="#contact" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-full hover:shadow-lg transition duration-300 font-medium">
          Liên hệ
        </a>

        <!-- Nếu chưa đăng nhập -->
        <div sec:authorize="isAnonymous()">
          <a class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 mx-2 rounded-full hover:shadow-lg transition duration-300 font-medium" href="/login">
            <i class="fas fa-sign-in-alt me-1"></i>Login
          </a>
          <a class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-full hover:shadow-lg transition duration-300 font-medium" href="/register">
            <i class="fas fa-user-plus me-1"></i>Register
          </a>
        </div>

        <!-- Nếu đã đăng nhập -->
        <div sec:authorize="isAuthenticated()" class="relative">
          <button id="userMenuBtn" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-full hover:shadow-lg transition duration-300 font-medium">
            Xin chào, <span th:text="${#authentication.name}">User</span>
          </button>
          <!-- Dropdown menu -->
          <div id="userDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 hidden">
            <a href="/user/profile" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Hồ sơ</a>
            <a href="/user/notifications" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Thông báo</a>
            <a href="/user/contracts" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Hợp đồng của tôi</a>
            <a href="/logout" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Đăng xuất</a>
          </div>
        </div>
      </div>
      <div class="md:hidden">
        <button id="mobile-menu-btn" class="text-gray-700 hover:text-blue-600 transition duration-300">
          <i class="fas fa-bars text-xl"></i>
        </button>
      </div>
    </div>
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden pb-4">
      <a href="#home" class="block py-2 text-gray-700 hover:text-blue-600 font-medium">Trang chủ</a>
      <a href="#about" class="block py-2 text-gray-700 hover:text-blue-600 font-medium">Giới thiệu</a>
      <a href="#services" class="block py-2 text-gray-700 hover:text-blue-600 font-medium">Dịch vụ</a>
      <a href="#portfolio" class="block py-2 text-gray-700 hover:text-blue-600 font-medium">Portfolio</a>
      <a href="#contact" class="block py-2 text-gray-700 hover:text-blue-600 font-medium">Liên hệ</a>
    </div>
  </div>
</nav>

<!-- HERO: PROJECT -->
<section class="relative isolate pt-28 md:pt-32 pb-12 md:pb-20 overflow-hidden">
  <!-- decor background -->
  <div class="pointer-events-none absolute inset-0 -z-10">
    <div class="absolute -top-24 -right-16 w-72 h-72 rounded-full blur-3xl opacity-20"
         style="background: radial-gradient(closest-side, #22c55e, transparent);"></div>
    <div class="absolute -bottom-16 -left-10 w-80 h-80 rounded-full blur-3xl opacity-20"
         style="background: radial-gradient(closest-side, #06b6d4, transparent);"></div>
  </div>

  <div class="container mx-auto px-4 lg:px-8 grid lg:grid-cols-12 gap-10 items-center">
    <div class="lg:col-span-6">
      <span class="inline-flex items-center text-xs font-semibold tracking-wide uppercase px-3 py-1 rounded-full
                   bg-emerald-50 text-emerald-700 ring-1 ring-emerald-100">Dự án</span>

      <h1 class="mt-4 text-4xl md:text-5xl font-extrabold tracking-tight text-gray-900">
        Dự án <span class="gradient-text">tiêu biểu</span>
      </h1>

      <p class="mt-4 text-lg text-gray-600 max-w-2xl">
        Tổng hợp chiến dịch nổi bật cùng video/ảnh demo. Bạn có thể ném thẳng link MP4,
        link YouTube (embed) hay ảnh — trang sẽ hiển thị ngay.
      </p>

      <div class="mt-6 flex flex-wrap gap-2">
        <span class="px-3 py-1 text-sm rounded-full bg-gray-100 text-gray-700">TVC</span>
        <span class="px-3 py-1 text-sm rounded-full bg-gray-100 text-gray-700">Social Video</span>
        <span class="px-3 py-1 text-sm rounded-full bg-gray-100 text-gray-700">Key Visual</span>
        <span class="px-3 py-1 text-sm rounded-full bg-gray-100 text-gray-700">Case Study</span>
      </div>

      <div class="mt-8 flex flex-wrap gap-3">
        <a href="/service"
           class="inline-flex items-center px-6 py-3 rounded-full font-semibold text-white
                  bg-gradient-to-r from-blue-500 to-purple-600 hover:shadow-xl transition">
          Xem dịch vụ liên quan
          <i class="fas fa-arrow-right ml-2"></i>
        </a>
        <a href="/project"
           class="inline-flex items-center px-6 py-3 rounded-full font-semibold text-blue-600 hover:underline">
          Xem tất cả dự án
        </a>
      </div>
    </div>

    <div class="lg:col-span-6">
      <!-- Featured media từ danh sách 'media' (ưu tiên hiển thị phần tử đầu) -->
      <div th:if="${media != null and !#lists.isEmpty(media)}">
        <div class="relative aspect-video rounded-2xl overflow-hidden ring-1 ring-black/10 shadow-2xl">
          <!-- VIDEO MP4 -->
          <video th:if="${media[0].type.name() == 'VIDEO_MP4'}"
                 class="w-full h-full" controls preload="metadata"
                 th:attr="src=${media[0].url}, poster=${media[0].thumb}">
            Trình duyệt của bạn không hỗ trợ video.
          </video>

          <!-- YOUTUBE -->
          <div th:if="${media[0].type.name() == 'YOUTUBE'}" class="relative w-full h-full">
            <iframe class="absolute inset-0 w-full h-full" th:src="${media[0].url}" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen></iframe>
          </div>

          <!-- ẢNH -->
          <img th:if="${media[0].type.name() == 'IMAGE'}" class="w-full h-full object-cover"
               th:src="${media[0].url}" th:alt="${media[0].title}">
        </div>
        <p class="mt-3 text-sm text-gray-500" th:text="${media[0].title}">Featured media</p>
      </div>

      <!-- Fallback nếu chưa có 'media' -->
      <div th:if="${media == null or #lists.isEmpty(media)}"
           class="relative aspect-video rounded-2xl overflow-hidden ring-1 ring-black/10 shadow-2xl">
        <img src="https://images.unsplash.com/photo-1551434678-e076c223a692?q=80&w=1400&auto=format&fit=crop"
             alt="Portfolio cover" class="w-full h-full object-cover">
      </div>
    </div>
  </div>
</section>

<!-- Videos từ CSDL -->
<section class="pb-20">
  <div class="container mx-auto px-4 lg:px-8">

    <!-- Có dữ liệu -->
    <div th:if="${not #lists.isEmpty(videos)}" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8">
      <div th:each="v : ${videos}" class="card p-4">
        <div class="relative w-full rounded-xl overflow-hidden bg-black">
          <!-- poster nếu có -->
          <video class="w-full h-auto" controls preload="metadata"
                 th:attr="src=${v.mediaUrl}, poster=${v.mediaThumb}">
            Trình duyệt của bạn không hỗ trợ video.
          </video>
        </div>

        <div class="mt-4">
          <h3 class="text-lg font-semibold" th:text="${v.mediaTitle != null ? v.mediaTitle : v.projectName}">Tựa video</h3>
          <div class="mt-2 text-gray-600 text-sm">
            <div><i class="fas fa-briefcase mr-2"></i><span th:text="${v.projectName}">Tên dự án</span></div>
            <div class="mt-1"><i class="fas fa-user-tie mr-2"></i><span th:text="${v.clientName}">Khách hàng</span></div>
          </div>
          <div class="mt-4 flex items-center justify-between">
            <a th:href="@{'/project/' + ${v.projectId}}" class="text-blue-600 hover:underline">Xem chi tiết</a>
            <a th:if="${v.mediaUrl != null}" th:href="${v.mediaUrl}" class="text-gray-600 hover:underline" download><i class="fas fa-download mr-1"></i>Tải</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Rỗng -->
    <div th:if="${#lists.isEmpty(videos)}" class="text-center py-16">
      <div class="text-6xl mb-4">📭</div>
      <p class="text-gray-600">Chưa có video nào được đính kèm dự án.</p>
    </div>

  </div>
</section>

<!-- Footer -->
<footer class="bg-black text-gray-300 py-16">
  <div class="container mx-auto px-4 lg:px-8">
    <div class="max-w-6xl mx-auto">
      <div class="grid md:grid-cols-4 gap-8">
        <div class="col-span-1 md:col-span-2">
          <div class="text-3xl font-bold gradient-text mb-6"><i class="fas fa-plus-circle mr-3"></i>5PLUS ONLINE</div>
          <p class="mb-6 leading-relaxed text-gray-400">Đơn vị tiên phong trong lĩnh vực truyền thông số và quảng cáo sáng tạo.</p>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Dịch vụ</h4>
          <ul class="space-y-2 text-gray-400"><li>Branding</li><li>Digital Ads</li><li>Video/Photograph</li><li>OOH</li></ul>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Liên hệ</h4>
          <ul class="space-y-2 text-gray-400">
            <li class="flex items-center"><i class="fas fa-map-marker-alt mr-3 text-pink-500"></i><span>Hà Nội</span></li>
            <li class="flex items-center"><i class="fas fa-phone mr-3 text-purple-500"></i><span>0909 123 456</span></li>
            <li class="flex items-center"><i class="fas fa-envelope mr-3 text-orange-500"></i><span>hello@5plusonline.com</span></li>
          </ul>
        </div>
      </div>
      <div class="border-t border-gray-800 mt-12 pt-8 text-center">
        <p class="text-gray-500">&copy; 2025 5PLUS ONLINE. Tất cả quyền được bảo lưu.</p>
        <p class="text-gray-600 text-sm mt-2">Thiết kế và phát triển bởi 5PLUS ONLINE</p>
      </div>
    </div>
  </div>
</footer>

<script>
  document.getElementById('mobile-menu-btn').addEventListener('click',()=>document.getElementById('mobile-menu').classList.toggle('hidden'));
  document.addEventListener("DOMContentLoaded",()=>{const btn=document.getElementById("userMenuBtn");const dd=document.getElementById("userDropdown");if(btn){btn.addEventListener("click",()=>dd.classList.toggle("hidden"));window.addEventListener("click",(e)=>{if(btn&&!btn.contains(e.target)&&dd&&!dd.contains(e.target))dd.classList.add("hidden");});}});
  window.addEventListener('scroll',()=>{const navbar=document.getElementById('navbar'); if(window.scrollY>100){navbar.classList.add('bg-white/95','backdrop-blur-md');}else{navbar.classList.remove('bg-white/95','backdrop-blur-md');}});
</script>
</body>
</html>
