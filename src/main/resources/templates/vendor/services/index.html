<!-- src/main/resources/templates/vendor/services/services.html -->
<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dịch vụ của tôi - Danh sách</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>*{font-family:'Inter',sans-serif}.sidebar-active{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}</style>
</head>
<body class="bg-gray-50">
<th:block th:replace="vendor/layouts/header :: vendorHeader"></th:block>
<div class="flex">
    <th:block th:replace="vendor/layouts/sidebar :: vendorSidebar"></th:block>

    <main class="flex-1 p-6">
        <div class="flex items-center justify-between mb-6">
            <div>
                <h1 class="text-2xl font-bold text-gray-900">Dịch vụ của tôi</h1>
                <p class="text-gray-600">Danh sách gói dịch vụ bạn đang cung cấp</p>
            </div>
            <a th:href="@{/vendor/services/create}" class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold">
                + Thêm dịch vụ
            </a>
        </div>

        <div th:if="${success}" class="mb-4 p-4 rounded-lg bg-green-50 text-green-800 border border-green-200">
            <i class="fas fa-check-circle mr-2"></i><span th:text="${success}">Thành công</span>
        </div>
        <div th:if="${error}" class="mb-4 p-4 rounded-lg bg-red-50 text-red-800 border border-red-200">
            <i class="fas fa-exclamation-triangle mr-2"></i><span th:text="${error}">Có lỗi</span>
        </div>

        <section class="bg-white rounded-2xl shadow p-6">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                <tr>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Tiêu đề</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Giá cơ bản</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Đơn vị</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Trạng thái</th>
                    <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase">Cập nhật</th>
                    <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase">Hành động</th>
                </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                <tr th:each="v : ${myServices}">
                    <td class="px-4 py-3">
                        <div class="flex items-center space-x-3">
                            <img th:if="${v.coverUrl}" th:src="${v.coverUrl}" class="w-10 h-10 rounded object-cover border" alt="">
                            <div>
                                <div class="font-medium text-gray-900" th:text="${v.title}">Tiêu đề</div>
                                <div class="text-xs text-gray-500" th:text="'Mã dịch vụ: #' + ${v.serviceId}">#0</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-4 py-3" th:text="${#numbers.formatDecimal(v.basePrice,0,'POINT',0,'NONE')} + ' đ'">0 đ</td>
                    <td class="px-4 py-3" th:text="${v.unit}">job</td>
                    <td class="px-4 py-3">
              <span th:text="${v.status}"
                    th:classappend="${v.status}=='ACTIVE' ? 'text-green-700 bg-green-50'
                                   : (${v.status}=='PAUSED' ? 'text-yellow-700 bg-yellow-50'
                                   : 'text-gray-700 bg-gray-100')"
                    class="px-2 py-1 rounded text-xs border">ACTIVE</span>
                    </td>
                    <td class="px-4 py-3 text-right"
                        th:text="${v.updatedAt != null ? #temporals.format(v.updatedAt,'dd/MM/yyyy HH:mm')
                                                : (v.createdAt != null ? #temporals.format(v.createdAt,'dd/MM/yyyy HH:mm') : '--')}">--</td>
                    <td class="px-4 py-3 text-right space-x-2">
                        <a th:href="@{'/vendor/services/' + ${v.id} + '/edit'}"
                           class="inline-flex items-center px-3 py-1 rounded-lg border text-sm hover:bg-gray-50">Sửa</a>
                        <form th:action="@{'/vendor/services/' + ${v.id} + '/delete'}" method="post" class="inline-block"
                              onsubmit="return confirm('Xóa dịch vụ này?');">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                            <button type="submit"
                                    class="inline-flex items-center px-3 py-1 rounded-lg border text-sm text-red-700 border-red-300 hover:bg-red-50">
                                Xóa
                            </button>
                        </form>
                    </td>
                </tr>
                <tr th:if="${#lists.isEmpty(myServices)}">
                    <td colspan="6" class="px-4 py-6 text-center text-gray-500">Bạn chưa có dịch vụ nào.</td>
                </tr>
                </tbody>
            </table>
        </section>
    </main>
</div>
</body>
</html>
